<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Propuestas DAO | CivicVault</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-[#0d1117] text-white font-sans">
    <!-- Header/Navbar -->
    <nav
      class="bg-[#0d1117] border-b border-slate-700 px-4 md:px-8 py-4 shadow-md sticky top-0 z-50"
    >
      <div class="flex justify-between items-center">
        <!-- Logo -->
        <a
          href="/index.html"
          class="text-white text-xl md:text-2xl font-bold tracking-tight hover:text-cyan-400 transition duration-200"
        >
          <span class="text-cyan-500">Civic</span>Vault
        </a>

        <!-- Hamburger Menu Button (Mobile) -->
        <button
          id="proposalsHamburger"
          class="md:hidden text-white focus:outline-none"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            ></path>
          </svg>
        </button>

        <!-- Desktop Navigation -->
        <div class="hidden md:flex items-center gap-8">
          <div class="flex gap-6 text-sm font-medium">
            <a
              href="/index.html"
              class="text-slate-300 hover:text-white transition duration-200"
              >Inicio</a
            >
            <a
              href="/proposals/proposals.html"
              class="text-cyan-400 font-semibold"
              >Propuestas</a
            >
            <a
              href="/dashboard/dashboard.html"
              class="text-slate-300 hover:text-white transition duration-200"
              >Fondo Comunitario</a
            >
            <a
              href="/wallet/wallet.html"
              class="text-slate-300 hover:text-white transition duration-200"
              >ğŸ’³ Wallet</a
            >
          </div>

          <!-- New Proposal Button Desktop -->
          <a
            href="#"
            class="bg-blue-600 hover:bg-blue-700 text-white text-sm px-4 py-2 rounded shadow transition duration-200"
            >+ Nueva Propuesta</a
          >
        </div>
      </div>

      <!-- Mobile Navigation Menu -->
      <div
        id="proposalsMobileMenu"
        class="md:hidden hidden mt-4 pt-4 border-t border-slate-600"
      >
        <div class="flex flex-col gap-4">
          <a
            href="/index.html"
            class="text-slate-300 hover:text-white transition duration-200 py-2"
            >Inicio</a
          >
          <a
            href="/proposals/proposals.html"
            class="text-cyan-400 font-semibold py-2"
            >Propuestas</a
          >
          <a
            href="/dashboard/dashboard.html"
            class="text-slate-300 hover:text-white transition duration-200 py-2"
            >Fondo Comunitario</a
          >
          <a
            href="/wallet/wallet.html"
            class="text-slate-300 hover:text-white transition duration-200 py-2"
            >ğŸ’³ Wallet</a
          >

          <!-- New Proposal Button Mobile -->
          <a
            href="#"
            class="bg-blue-600 hover:bg-blue-700 text-white text-sm px-4 py-2 rounded shadow w-full text-center mt-4 transition duration-200"
            >+ Nueva Propuesta</a
          >
        </div>
      </div>
    </nav>

    <!-- Page Header -->
    <header class="px-4 md:px-6 py-6">
      <h1 class="text-2xl md:text-3xl font-bold text-blue-400">
        Propuestas Comunitarias
      </h1>
      <p class="text-sm text-slate-400">
        Vota y propÃ³n proyectos que transformen tu comunidad
      </p>

      <!-- Stats rÃ¡pidas -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">
        <div class="bg-slate-800 p-3 rounded-lg text-center">
          <p class="text-lg font-bold text-green-400">12</p>
          <p class="text-xs text-slate-400">Proyectos Activos</p>
        </div>
        <div class="bg-slate-800 p-3 rounded-lg text-center">
          <p class="text-lg font-bold text-blue-400">â‚¬487K</p>
          <p class="text-xs text-slate-400">Fondos Disponibles</p>
        </div>
        <div class="bg-slate-800 p-3 rounded-lg text-center">
          <p class="text-lg font-bold text-purple-400">2,847</p>
          <p class="text-xs text-slate-400">Votantes Activos</p>
        </div>
        <div class="bg-slate-800 p-3 rounded-lg text-center">
          <p class="text-lg font-bold text-cyan-400">94%</p>
          <p class="text-xs text-slate-400">Transparencia</p>
        </div>
      </div>
    </header>

    <!-- Filtros -->
    <section class="px-4 md:px-6 py-4">
      <div
        class="flex flex-col md:flex-row md:items-center justify-between gap-4"
      >
        <input
          type="text"
          placeholder="Buscar propuestas..."
          class="w-full md:w-1/2 px-4 py-2 rounded bg-slate-800 text-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"
        />
        <div class="flex flex-wrap gap-2 text-sm">
          <button
            class="bg-blue-700 px-3 md:px-4 py-1 md:py-2 rounded text-white transition duration-200 hover:bg-blue-600"
          >
            ğŸ—³ï¸ En VotaciÃ³n (4)
          </button>
          <button
            class="bg-slate-800 px-3 md:px-4 py-1 md:py-2 rounded text-slate-300 transition duration-200 hover:bg-slate-700"
          >
            âœ… Aprobadas (8)
          </button>
          <button
            class="bg-slate-800 px-3 md:px-4 py-1 md:py-2 rounded text-slate-300 transition duration-200 hover:bg-slate-700"
          >
            ğŸš§ En EjecuciÃ³n (5)
          </button>
          <button
            class="bg-slate-800 px-3 md:px-4 py-1 md:py-2 rounded text-slate-300 transition duration-200 hover:bg-slate-700"
          >
            ğŸ‰ Completadas (12)
          </button>
          <button
            class="bg-slate-800 px-3 md:px-4 py-1 md:py-2 rounded text-slate-300 transition duration-200 hover:bg-slate-700"
          >
            Todas (29)
          </button>
        </div>
      </div>
    </section>

    <!-- Lista de propuestas -->
    <main class="space-y-4 md:space-y-6 px-4 md:px-6 pb-10">
      <!-- Propuesta 1: Red de Huertos Urbanos -->
      <div
        class="bg-gradient-to-r from-green-900 to-emerald-900 rounded-xl p-4 md:p-6 shadow-md border border-green-700"
      >
        <div
          class="flex flex-col md:flex-row justify-between md:items-center mb-3"
        >
          <div class="mb-2 md:mb-0">
            <h2 class="text-base md:text-lg font-bold mb-2 text-green-200">
              ğŸŒ± Red de Huertos Urbanos Comunitarios
            </h2>
            <div class="flex flex-wrap gap-1 md:gap-2">
              <span class="bg-green-600 text-xs rounded px-2 py-1 text-white"
                >ğŸŒ¿ Sostenibilidad</span
              >
              <span class="bg-blue-600 text-xs rounded px-2 py-1 text-white"
                >ğŸ—³ï¸ En VotaciÃ³n</span
              >
              <span class="bg-purple-600 text-xs rounded px-2 py-1 text-white"
                >ğŸŒ Alto Impacto</span
              >
            </div>
          </div>
          <p class="text-xs md:text-sm text-green-300">
            â³ 6d 12h restantes para votar
          </p>
        </div>

        <p class="text-slate-200 text-sm mb-3">
          Crear una red de 12 huertos comunitarios en azoteas y solares vacÃ­os,
          proporcionando alimentos frescos, educaciÃ³n ambiental y espacios de
          encuentro vecinal. Incluye sistema de compostaje y recogida de agua de
          lluvia.
        </p>

        <div
          class="grid grid-cols-2 md:grid-cols-5 gap-2 text-xs text-slate-300 mb-3"
        >
          <span>ğŸ“… Propuesta: 2024-01-20</span>
          <span>ğŸ‘¥ MÃ­nimo: 500 votos</span>
          <span>ğŸ“ 12 ubicaciones identificadas</span>
          <span>ğŸ’° Presupuesto: â‚¬45,000</span>
          <span>ğŸ—³ Votos actuales: 1,247</span>
        </div>

        <!-- Progreso de votaciÃ³n -->
        <div class="mb-3">
          <div class="flex justify-between text-xs text-slate-300 mb-1">
            <span>Progreso de votaciÃ³n</span>
            <span>249% del mÃ­nimo alcanzado</span>
          </div>
          <div class="w-full bg-slate-700 h-2 rounded mb-1">
            <div class="bg-green-400 h-2 rounded w-[89%]"></div>
          </div>
        </div>

        <div
          class="flex flex-col md:flex-row justify-between md:items-center gap-3"
        >
          <div class="text-sm space-x-4">
            <span class="text-green-400 font-semibold"
              >âœ… A favor: 1,108 (89%)</span
            >
            <span class="text-red-400 font-semibold"
              >âŒ En contra: 139 (11%)</span
            >
          </div>
          <div class="flex flex-col md:flex-row gap-2">
            <button
              onclick="voteForProposal('huertos', true)"
              class="bg-green-600 hover:bg-green-700 px-3 py-2 text-xs rounded transition duration-200"
            >
              âœ… Votar A Favor
            </button>
            <button
              onclick="voteForProposal('huertos', false)"
              class="bg-red-600 hover:bg-red-700 px-3 py-2 text-xs rounded transition duration-200"
            >
              âŒ Votar En Contra
            </button>
            <button
              onclick="viewProposalDetails('huertos')"
              class="bg-slate-700 hover:bg-slate-600 px-3 py-2 text-xs rounded transition duration-200 text-center"
            >
              ğŸ“‹ Ver Detalles
            </button>
          </div>
        </div>

        <!-- InformaciÃ³n adicional -->
        <div
          class="mt-4 pt-3 border-t border-green-700 grid grid-cols-1 md:grid-cols-3 gap-3 text-xs"
        >
          <div class="flex items-center gap-2">
            <span class="w-2 h-2 bg-green-400 rounded-full"></span>
            <span class="text-slate-300"
              >Blockchain: Todas las transacciones pÃºblicas</span
            >
          </div>
          <div class="flex items-center gap-2">
            <span class="w-2 h-2 bg-blue-400 rounded-full"></span>
            <span class="text-slate-300"
              >Propuesta por: AsociaciÃ³n Verde Local</span
            >
          </div>
          <div class="flex items-center gap-2">
            <span class="w-2 h-2 bg-purple-400 rounded-full"></span>
            <span class="text-slate-300"
              >Beneficiarios estimados: 2,500 familias</span
            >
          </div>
        </div>
      </div>

      <!-- Propuesta 2: Centro de EnergÃ­as Renovables -->
      <div
        class="bg-gradient-to-r from-blue-900 to-cyan-900 rounded-xl p-4 md:p-6 shadow-md border border-blue-700"
      >
        <div
          class="flex flex-col md:flex-row justify-between md:items-center mb-3"
        >
          <div class="mb-2 md:mb-0">
            <h2 class="text-base md:text-lg font-bold mb-2 text-blue-200">
              âš¡ Centro de FormaciÃ³n en EnergÃ­as Renovables
            </h2>
            <div class="flex flex-wrap gap-1 md:gap-2">
              <span class="bg-blue-600 text-xs rounded px-2 py-1 text-white"
                >ğŸ“ EducaciÃ³n</span
              >
              <span class="bg-green-600 text-xs rounded px-2 py-1 text-white"
                >ğŸ—³ï¸ En VotaciÃ³n</span
              >
              <span class="bg-orange-600 text-xs rounded px-2 py-1 text-white"
                >âš¡ EnergÃ­a</span
              >
            </div>
          </div>
          <p class="text-xs md:text-sm text-blue-300">
            â³ 4d 8h restantes para votar
          </p>
        </div>

        <p class="text-slate-200 text-sm mb-3">
          Establecer un centro de formaciÃ³n tÃ©cnica en instalaciÃ³n de placas
          solares, eÃ³lica domÃ©stica y eficiencia energÃ©tica. Incluye talleres
          gratuitos para vecinos y programa de certificaciÃ³n profesional.
        </p>

        <div
          class="grid grid-cols-2 md:grid-cols-5 gap-2 text-xs text-slate-300 mb-3"
        >
          <span>ğŸ“… Propuesta: 2024-01-18</span>
          <span>ğŸ‘¥ MÃ­nimo: 400 votos</span>
          <span>ğŸ¢ Local ya identificado</span>
          <span>ğŸ’° Presupuesto: â‚¬28,500</span>
          <span>ğŸ—³ Votos actuales: 756</span>
        </div>

        <div class="mb-3">
          <div class="flex justify-between text-xs text-slate-300 mb-1">
            <span>Progreso de votaciÃ³n</span>
            <span>189% del mÃ­nimo alcanzado</span>
          </div>
          <div class="w-full bg-slate-700 h-2 rounded mb-1">
            <div class="bg-blue-400 h-2 rounded w-[94%]"></div>
          </div>
        </div>

        <div
          class="flex flex-col md:flex-row justify-between md:items-center gap-3"
        >
          <div class="text-sm space-x-4">
            <span class="text-green-400 font-semibold"
              >âœ… A favor: 712 (94%)</span
            >
            <span class="text-red-400 font-semibold"
              >âŒ En contra: 44 (6%)</span
            >
          </div>
          <div class="flex flex-col md:flex-row gap-2">
            <button
              onclick="voteForProposal('energia', true)"
              class="bg-green-600 hover:bg-green-700 px-3 py-2 text-xs rounded transition duration-200"
            >
              âœ… Votar A Favor
            </button>
            <button
              onclick="voteForProposal('energia', false)"
              class="bg-red-600 hover:bg-red-700 px-3 py-2 text-xs rounded transition duration-200"
            >
              âŒ Votar En Contra
            </button>
            <button
              onclick="viewProposalDetails('energia')"
              class="bg-slate-700 hover:bg-slate-600 px-3 py-2 text-xs rounded transition duration-200 text-center"
            >
              ğŸ“‹ Ver Detalles
            </button>
          </div>
        </div>
      </div>

      <!-- Propuesta 3: AplicaciÃ³n de Transparencia Municipal -->
      <div
        class="bg-gradient-to-r from-purple-900 to-indigo-900 rounded-xl p-4 md:p-6 shadow-md border border-purple-700"
      >
        <div
          class="flex flex-col md:flex-row justify-between md:items-center mb-3"
        >
          <div class="mb-2 md:mb-0">
            <h2 class="text-base md:text-lg font-bold mb-2 text-purple-200">
              ğŸ“± App de Transparencia Municipal en Blockchain
            </h2>
            <div class="flex flex-wrap gap-1 md:gap-2">
              <span class="bg-purple-600 text-xs rounded px-2 py-1 text-white"
                >ğŸ’» TecnologÃ­a</span
              >
              <span class="bg-green-600 text-xs rounded px-2 py-1 text-white"
                >ğŸ—³ï¸ En VotaciÃ³n</span
              >
              <span class="bg-blue-600 text-xs rounded px-2 py-1 text-white"
                >ğŸ” Transparencia</span
              >
            </div>
          </div>
          <p class="text-xs md:text-sm text-purple-300">
            â³ 9d 14h restantes para votar
          </p>
        </div>

        <p class="text-slate-200 text-sm mb-3">
          Desarrollar una aplicaciÃ³n mÃ³vil que registre en blockchain todos los
          gastos municipales en tiempo real. Los ciudadanos podrÃ¡n escanear
          cÃ³digos QR en obras pÃºblicas para ver costos, proveedores y progreso.
        </p>

        <div
          class="grid grid-cols-2 md:grid-cols-5 gap-2 text-xs text-slate-300 mb-3"
        >
          <span>ğŸ“… Propuesta: 2024-01-22</span>
          <span>ğŸ‘¥ MÃ­nimo: 600 votos</span>
          <span>ğŸ”— 100% en blockchain</span>
          <span>ğŸ’° Presupuesto: â‚¬18,000</span>
          <span>ğŸ—³ Votos actuales: 423</span>
        </div>

        <div class="mb-3">
          <div class="flex justify-between text-xs text-slate-300 mb-1">
            <span>Progreso de votaciÃ³n</span>
            <span>71% del mÃ­nimo alcanzado</span>
          </div>
          <div class="w-full bg-slate-700 h-2 rounded mb-1">
            <div class="bg-purple-400 h-2 rounded w-[71%]"></div>
          </div>
        </div>

        <div
          class="flex flex-col md:flex-row justify-between md:items-center gap-3"
        >
          <div class="text-sm space-x-4">
            <span class="text-green-400 font-semibold"
              >âœ… A favor: 398 (94%)</span
            >
            <span class="text-red-400 font-semibold"
              >âŒ En contra: 25 (6%)</span
            >
          </div>
          <div class="flex flex-col md:flex-row gap-2">
            <button
              onclick="voteForProposal('transparencia', true)"
              class="bg-green-600 hover:bg-green-700 px-3 py-2 text-xs rounded transition duration-200"
            >
              âœ… Votar A Favor
            </button>
            <button
              onclick="voteForProposal('transparencia', false)"
              class="bg-red-600 hover:bg-red-700 px-3 py-2 text-xs rounded transition duration-200"
            >
              âŒ Votar En Contra
            </button>
            <button
              onclick="viewProposalDetails('transparencia')"
              class="bg-slate-700 hover:bg-slate-600 px-3 py-2 text-xs rounded transition duration-200 text-center"
            >
              ğŸ“‹ Ver Detalles
            </button>
          </div>
        </div>
      </div>

      <!-- Propuesta 4: Red de MicrocrÃ©ditos Comunitarios -->
      <div
        class="bg-gradient-to-r from-orange-900 to-red-900 rounded-xl p-4 md:p-6 shadow-md border border-orange-700"
      >
        <div
          class="flex flex-col md:flex-row justify-between md:items-center mb-3"
        >
          <div class="mb-2 md:mb-0">
            <h2 class="text-base md:text-lg font-bold mb-2 text-orange-200">
              ğŸª Red de MicrocrÃ©ditos para PequeÃ±os Comercios
            </h2>
            <div class="flex flex-wrap gap-1 md:gap-2">
              <span class="bg-orange-600 text-xs rounded px-2 py-1 text-white"
                >ğŸ’¼ EconomÃ­a</span
              >
              <span class="bg-green-600 text-xs rounded px-2 py-1 text-white"
                >ğŸ—³ï¸ En VotaciÃ³n</span
              >
              <span class="bg-blue-600 text-xs rounded px-2 py-1 text-white"
                >ğŸ¤ Social</span
              >
            </div>
          </div>
          <p class="text-xs md:text-sm text-orange-300">
            â³ 1d 4h restantes para votar
          </p>
        </div>

        <p class="text-slate-200 text-sm mb-3">
          Crear un fondo rotativo de microcrÃ©ditos (â‚¬500-â‚¬5000) para pequeÃ±os
          emprendedores locales. Sistema de avales comunitarios, interÃ©s 0%,
          pagos en blockchain para mÃ¡xima transparencia.
        </p>

        <div
          class="grid grid-cols-2 md:grid-cols-5 gap-2 text-xs text-slate-300 mb-3"
        >
          <span>ğŸ“… Propuesta: 2024-01-16</span>
          <span>ğŸ‘¥ MÃ­nimo: 800 votos</span>
          <span>ğŸ’³ 20 microcrÃ©ditos inicial</span>
          <span>ğŸ’° Presupuesto: â‚¬65,000</span>
          <span>ğŸ—³ Votos actuales: 1,834</span>
        </div>

        <div class="mb-3">
          <div class="flex justify-between text-xs text-slate-300 mb-1">
            <span>Progreso de votaciÃ³n</span>
            <span>229% del mÃ­nimo alcanzado</span>
          </div>
          <div class="w-full bg-slate-700 h-2 rounded mb-1">
            <div class="bg-orange-400 h-2 rounded w-[96%]"></div>
          </div>
        </div>

        <div
          class="flex flex-col md:flex-row justify-between md:items-center gap-3"
        >
          <div class="text-sm space-x-4">
            <span class="text-green-400 font-semibold"
              >âœ… A favor: 1,761 (96%)</span
            >
            <span class="text-red-400 font-semibold"
              >âŒ En contra: 73 (4%)</span
            >
          </div>
          <div class="flex flex-col md:flex-row gap-2">
            <button
              onclick="voteForProposal('microcreditos', true)"
              class="bg-green-600 hover:bg-green-700 px-3 py-2 text-xs rounded transition duration-200"
            >
              âœ… Votar A Favor
            </button>
            <button
              onclick="voteForProposal('microcreditos', false)"
              class="bg-red-600 hover:bg-red-700 px-3 py-2 text-xs rounded transition duration-200"
            >
              âŒ Votar En Contra
            </button>
            <button
              onclick="viewProposalDetails('microcreditos')"
              class="bg-slate-700 hover:bg-slate-600 px-3 py-2 text-xs rounded transition duration-200 text-center"
            >
              ğŸ“‹ Ver Detalles
            </button>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="text-center text-xs text-slate-500 mt-8 pb-6">
      Â© 2023 CivicVault. Todos los derechos reservados.
      <a href="#" class="text-blue-400 underline">PolÃ­tica de Privacidad</a>
    </footer>

    <!-- JavaScript para navegaciÃ³n y funcionalidad de propuestas -->
    <script>
      // Proposals hamburger menu toggle
      const proposalsHamburger = document.getElementById("proposalsHamburger");
      const proposalsMobileMenu = document.getElementById(
        "proposalsMobileMenu",
      );

      if (proposalsHamburger && proposalsMobileMenu) {
        proposalsHamburger.addEventListener("click", function () {
          proposalsMobileMenu.classList.toggle("hidden");

          // Toggle hamburger icon
          const svg = proposalsHamburger.querySelector("svg path");
          if (proposalsMobileMenu.classList.contains("hidden")) {
            svg.setAttribute("d", "M4 6h16M4 12h16M4 18h16");
          } else {
            svg.setAttribute("d", "M6 18L18 6M6 6l12 12");
          }
        });

        // Close mobile menu when clicking outside
        document.addEventListener("click", function (e) {
          if (
            !proposalsHamburger.contains(e.target) &&
            !proposalsMobileMenu.contains(e.target)
          ) {
            proposalsMobileMenu.classList.add("hidden");
            const svg = proposalsHamburger.querySelector("svg path");
            svg.setAttribute("d", "M4 6h16M4 12h16M4 18h16");
          }
        });

        // Close mobile menu when window is resized to desktop
        window.addEventListener("resize", function () {
          if (window.innerWidth >= 768) {
            proposalsMobileMenu.classList.add("hidden");
            const svg = proposalsHamburger.querySelector("svg path");
            svg.setAttribute("d", "M4 6h16M4 12h16M4 18h16");
          }
        });
      }

      // Sistema de votaciÃ³n y propuestas
      let userVotes = {}; // Simular votos del usuario

      // FunciÃ³n para votar en propuestas
      function voteForProposal(proposalId, support) {
        // Verificar si el usuario ya votÃ³
        if (userVotes[proposalId]) {
          showNotification(
            "Ya has votado en esta propuesta. El voto es vinculante e inmutable en blockchain.",
            "warning",
          );
          return;
        }

        // Confirmar voto
        const confirmation = confirm(
          `Â¿Confirmas tu voto ${support ? "A FAVOR" : "EN CONTRA"} de esta propuesta?\n\n` +
            `âš ï¸ IMPORTANTE: Tu voto quedarÃ¡ registrado permanentemente en blockchain y no se puede cambiar.\n` +
            `ğŸ” Tu direcciÃ³n wallet serÃ¡ pÃºblica pero anÃ³nima.\n` +
            `ğŸ“Š El resultado serÃ¡ transparente y verificable por todos.`,
        );

        if (confirmation) {
          // Simular proceso de votaciÃ³n en blockchain
          showVotingProcess(proposalId, support);
        }
      }

      function showVotingProcess(proposalId, support) {
        const notification = showNotification(
          "ğŸ”— Conectando con blockchain...",
          "info",
          6000,
        );

        setTimeout(() => {
          showNotification(
            "ğŸ“ Registrando voto en blockchain...",
            "info",
            4000,
          );

          setTimeout(() => {
            showNotification("â›ï¸ Minando transacciÃ³n...", "info", 3000);

            setTimeout(() => {
              // Registrar el voto
              userVotes[proposalId] = support;

              // Actualizar visualmente los contadores (simulado)
              updateVoteCounters(proposalId, support);

              showNotification(
                `ğŸ‰ Â¡Voto registrado exitosamente!\n` +
                  `Hash: 0x${Math.random().toString(16).substr(2, 8)}...\n` +
                  `Gas usado: 21,000 | Confirmaciones: 12/12`,
                "success",
              );

              // Deshabilitar botones de voto para esta propuesta
              disableVoteButtons(proposalId);
            }, 3000);
          }, 4000);
        }, 2000);
      }

      function updateVoteCounters(proposalId, support) {
        // Esta funciÃ³n simularÃ­a la actualizaciÃ³n en tiempo real desde blockchain
        console.log(
          `Voto registrado para ${proposalId}: ${support ? "A favor" : "En contra"}`,
        );
      }

      function disableVoteButtons(proposalId) {
        const buttons = document.querySelectorAll(
          `button[onclick*="${proposalId}"]`,
        );
        buttons.forEach((button) => {
          if (button.textContent.includes("Votar")) {
            button.disabled = true;
            button.classList.add("opacity-50", "cursor-not-allowed");
            if (userVotes[proposalId]) {
              button.textContent = userVotes[proposalId]
                ? "âœ… Votaste A Favor"
                : "âŒ Votaste En Contra";
            }
          }
        });
      }

      // FunciÃ³n para ver detalles de propuesta
      function viewProposalDetails(proposalId) {
        const proposalData = {
          huertos: {
            title: "Red de Huertos Urbanos Comunitarios",
            description:
              "Proyecto integral para crear 12 huertos comunitarios distribuidos por la ciudad.",
            timeline: "6 meses de implementaciÃ³n",
            budget: "â‚¬45,000",
            impact:
              "2,500 familias beneficiadas, 60 empleos temporales, -40% residuos orgÃ¡nicos",
            blockchain: "0xa1b2c3d4e5f6789012345678901234567890abcd",
            proposer: "AsociaciÃ³n Verde Local",
            supporters: [
              "EcoBarrio",
              "Permacultura Urbana",
              "Vecinos Sostenibles",
            ],
          },
          energia: {
            title: "Centro de FormaciÃ³n en EnergÃ­as Renovables",
            description:
              "Centro educativo especializado en tecnologÃ­as limpias y formaciÃ³n tÃ©cnica.",
            timeline: "4 meses de implementaciÃ³n",
            budget: "â‚¬28,500",
            impact:
              "200 personas formadas/aÃ±o, 50 certificaciones tÃ©cnicas, -25% consumo energÃ©tico local",
            blockchain: "0xb2c3d4e5f6789012345678901234567890abcde1",
            proposer: "Cooperativa EnergÃ©tica Local",
            supporters: [
              "Universidad TÃ©cnica",
              "Sindicato Electricistas",
              "Ayuntamiento",
            ],
          },
          transparencia: {
            title: "App de Transparencia Municipal en Blockchain",
            description:
              "AplicaciÃ³n mÃ³vil para tracking en tiempo real de gastos municipales.",
            timeline: "3 meses de desarrollo",
            budget: "â‚¬18,000",
            impact:
              "100% transparencia gastos pÃºblicos, +80% confianza ciudadana, modelo replicable",
            blockchain: "0xc3d4e5f6789012345678901234567890abcde12f",
            proposer: "Colectivo Tech for Good",
            supporters: [
              "Hacklab Local",
              "Transparencia Internacional",
              "Desarrolladores Unidos",
            ],
          },
          microcreditos: {
            title: "Red de MicrocrÃ©ditos para PequeÃ±os Comercios",
            description:
              "Fondo rotativo de microcrÃ©ditos sin interÃ©s para emprendedores locales.",
            timeline: "2 meses de puesta en marcha",
            budget: "â‚¬65,000",
            impact:
              "20 emprendimientos financiados, 80 empleos creados, +15% actividad comercial local",
            blockchain: "0xd4e5f6789012345678901234567890abcde12f34",
            proposer: "CÃ¡mara de Comercio Alternativa",
            supporters: [
              "Microfinanzas Ã‰ticas",
              "Emprendedores Unidos",
              "Banca Ã‰tica Local",
            ],
          },
        };

        const proposal = proposalData[proposalId];
        if (!proposal) return;

        alert(
          `ğŸ“‹ DETALLES DE LA PROPUESTA\n\n` +
            `ğŸ·ï¸ TÃ­tulo: ${proposal.title}\n\n` +
            `ğŸ“„ DescripciÃ³n: ${proposal.description}\n\n` +
            `â±ï¸ Timeline: ${proposal.timeline}\n\n` +
            `ğŸ’° Presupuesto: ${proposal.budget}\n\n` +
            `ğŸ“Š Impacto esperado: ${proposal.impact}\n\n` +
            `ğŸ”— Hash Blockchain: ${proposal.blockchain}\n\n` +
            `ğŸ‘¤ Propuesto por: ${proposal.proposer}\n\n` +
            `ğŸ¤ Apoyado por: ${proposal.supporters.join(", ")}\n\n` +
            `ğŸ” Toda la informaciÃ³n es verificable en blockchain`,
        );
      }

      // Sistema de notificaciones mejorado
      function showNotification(message, type = "info", duration = 3000) {
        const notification = document.createElement("div");
        notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm transition-all duration-300 ${
          type === "success"
            ? "bg-green-600 text-white"
            : type === "error"
              ? "bg-red-600 text-white"
              : type === "warning"
                ? "bg-yellow-600 text-white"
                : "bg-blue-600 text-white"
        }`;

        notification.style.whiteSpace = "pre-line";
        notification.textContent = message;

        document.body.appendChild(notification);

        setTimeout(() => {
          notification.style.transform = "translateX(100%)";
          setTimeout(() => {
            if (document.body.contains(notification)) {
              document.body.removeChild(notification);
            }
          }, 300);
        }, duration);

        return notification;
      }

      // SimulaciÃ³n de datos en tiempo real desde blockchain
      function updateRealTimeData() {
        // Esta funciÃ³n simularÃ­a actualizaciones automÃ¡ticas desde la blockchain
        const stats = document.querySelectorAll('[class*="font-bold"]');
        // AquÃ­ se actualizarÃ­an los contadores en tiempo real
      }

      // Inicializar actualizaciones en tiempo real
      setInterval(updateRealTimeData, 30000); // Cada 30 segundos
    </script>
  </body>
</html>
