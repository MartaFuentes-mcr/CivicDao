<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Dashboard de proyectos comunitarios - CivicVault" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono&display=swap" rel="stylesheet">
    <title>Dashboard de Proyectos | CivicVault</title>
    <!-- Enlaza tu CSS externo -->
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="../css/dashboard.css" />
    
    <!-- Estilos adicionales para el menú hamburguesa -->
    <style>
      /* Estilos para el menú hamburguesa */
      .navbar__hamburger {
        display: none;
        flex-direction: column;
        justify-content: space-between;
        width: 30px;
        height: 21px;
        cursor: pointer;
        z-index: 100;
      }
      
      .navbar__hamburger span {
        display: block;
        height: 3px;
        width: 100%;
        background-color: white;
        border-radius: 3px;
        transition: all 0.3s ease;
      }
      
      .navbar__hamburger.active span:nth-child(1) {
        transform: translateY(9px) rotate(45deg);
      }
      
      .navbar__hamburger.active span:nth-child(2) {
        opacity: 0;
      }
      
      .navbar__hamburger.active span:nth-child(3) {
        transform: translateY(-9px) rotate(-45deg);
      }
      
      @media (max-width: 768px) {
        .navbar__hamburger {
          display: flex;
        }
        
        .navbar__menu {
          position: fixed;
          top: 0;
          right: -100%;
          width: 80%;
          max-width: 300px;
          height: 100vh;
          background-color: var(--color-primary-dark);
          flex-direction: column;
          justify-content: flex-start;
          align-items: flex-start;
          padding: 5rem 2rem 2rem;
          transition: right 0.3s ease;
          z-index: 90;
          box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
        }
        
        .navbar__menu.active {
          right: 0;
        }
        
        .navbar__menu li {
          margin: 1rem 0;
          width: 100%;
        }
        
        .navbar__menu a {
          font-size: 1.125rem;
          padding: 0.5rem 0;
          display: block;
          width: 100%;
        }
      }
    </style>
    
    <!-- Script para el menú hamburguesa -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const hamburger = document.getElementById('dashboardHamburger');
        const mobileMenu = document.getElementById('dashboardMobileMenu');
        
        if (hamburger && mobileMenu) {
          hamburger.addEventListener('click', function() {
            hamburger.classList.toggle('active');
            mobileMenu.classList.toggle('active');
            console.log('Hamburger clicked - Menu toggled');
          });
          
          mobileMenu.addEventListener('click', function(e) {
            if (e.target.tagName === 'A') {
              hamburger.classList.remove('active');
              mobileMenu.classList.remove('active');
            }
          });
        } else {
          console.error('Hamburger menu elements not found:', 
                      hamburger ? 'Hamburger found' : 'Hamburger NOT found', 
                      mobileMenu ? 'Mobile menu found' : 'Mobile menu NOT found');
        }
      });
    </script>
  </head>
  <body>
    <!-- NAVEGACIÓN -->
    <nav class="navbar">
      <div class="container navbar__inner">
        <!-- Logo -->
        <a href="/" class="navbar__logo">
          <img src="../assets/images/logo.svg" alt="CivicVault Logo" class="navbar__logo-img">
          <span>CivicVault</span>
        </a>

        <!-- Hamburger Menu Button -->
        <div class="navbar__hamburger" id="dashboardHamburger">
          <span></span>
          <span></span>
          <span></span>
        </div>

        <!-- Menú -->
        <ul class="navbar__menu" id="dashboardMobileMenu">
          <li><a href="../index.html">Inicio</a></li>
          <li><a href="#" class="active">Dashboard</a></li>
          <li><a href="../proposals/proposals.html">Propuestas</a></li>
          <li><a href="../wallet/wallet.html">Wallet</a></li>
        </ul>

        <div class="navbar__actions">
          <a href="../wallet/wallet.html" class="btn btn--outline btn--sm">Mi Cuenta</a>
        </div>
      </div>
    </nav>

    <!-- Modal de contribución -->
    <div id="contributionModal" class="modal">
      <div class="modal__content">
        <div class="modal__header">
          <h2 class="modal__title">Contribuir al Proyecto</h2>
          <button class="modal__close" id="closeContributionModal">&times;</button>
        </div>
        <div class="modal__body">
          <p class="text-light mb-4" id="modalProjectName">Nombre del Proyecto</p>
          
          <div class="form-group">
            <label for="amountInput" class="form-label">Cantidad (€)</label>
            <input
              type="number"
              id="amountInput"
              class="form-input"
              placeholder="0.00"
              min="5"
              step="5"
            />
          </div>
          
          <div class="quick-amount-buttons">
            <button onclick="setQuickAmount(10)" class="btn btn--sm btn--outline">€10</button>
            <button onclick="setQuickAmount(25)" class="btn btn--sm btn--outline">€25</button>
            <button onclick="setQuickAmount(50)" class="btn btn--sm btn--outline">€50</button>
            <button onclick="setQuickAmount(100)" class="btn btn--sm btn--outline">€100</button>
          </div>
          
          <div class="form-group">
            <label for="paymentMethod" class="form-label">Método de Pago</label>
            <select id="paymentMethod" class="form-select">
              <option value="wallet">Wallet CivicVault (€1,245.00)</option>
              <option value="card">Tarjeta terminada en 4242</option>
              <option value="new">Añadir nuevo método</option>
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-checkbox">
              <input type="checkbox" checked />
              <span>Hacer esta contribución anónima</span>
            </label>
          </div>
        </div>
        <div class="modal__footer">
          <button class="btn btn--outline" id="cancelContribution">Cancelar</button>
          <button class="btn btn--primary">Confirmar Contribución</button>
        </div>
      </div>
    </div>

    <!-- Modal de detalles del proyecto -->
    <div id="projectDetailsModal" class="modal">
      <div class="modal__content modal__content--large">
        <div class="modal__header">
          <h3 class="modal__title">Detalles del Proyecto</h3>
          <button class="modal__close" aria-label="Cerrar">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="modal__body" id="projectDetailsContent">
          <!-- El contenido se generará dinámicamente -->
        </div>
        
        <div class="modal__footer">
          <div class="modal__actions">
            <button class="btn btn--primary" id="contributeBtn">
              <i class="fas fa-heart"></i> Contribuir
            </button>
            <button class="btn btn--success" id="voteBtn">
              <i class="fas fa-vote-yea"></i> Votar
            </button>
            <button class="btn btn--outline" id="shareBtn">
              <i class="fas fa-share-alt"></i> Compartir
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de nueva propuesta -->
    <div id="newProposalModal" class="modal">
      <div class="modal__content">
        <div class="modal__header">
          <h2 class="modal__title">Crear Nueva Propuesta</h2>
          <button class="modal__close" id="closeNewProposalModal">&times;</button>
        </div>
        <div class="modal__body">
          <div class="form-group">
            <label for="proposalTitle" class="form-label">Título de la Propuesta</label>
            <input type="text" id="proposalTitle" class="form-input" placeholder="Ej: Red de Huertos Urbanos Comunitarios" />
          </div>
          
          <div class="form-group">
            <label for="proposalCategory" class="form-label">Categoría</label>
            <select id="proposalCategory" class="form-select">
              <option value="">Seleccionar categoría</option>
              <option value="sustainability">Sostenibilidad</option>
              <option value="education">Educación</option>
              <option value="infrastructure">Infraestructura</option>
              <option value="culture">Cultura</option>
              <option value="technology">Tecnología</option>
              <option value="health">Salud</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="proposalDescription" class="form-label">Descripción</label>
            <textarea id="proposalDescription" class="form-textarea" rows="4" placeholder="Describe tu propuesta..."></textarea>
          </div>
          
          <div class="form-group">
            <label for="proposalBudget" class="form-label">Presupuesto Estimado (€)</label>
            <input type="number" id="proposalBudget" class="form-input" placeholder="0.00" min="1000" />
          </div>
          
          <div class="form-group">
            <label for="proposalBeneficiaries" class="form-label">Beneficiarios Estimados</label>
            <input type="text" id="proposalBeneficiaries" class="form-input" placeholder="Ej: 2,500 familias" />
          </div>
          
          <div class="form-group">
            <label for="proposalLocation" class="form-label">Ubicación</label>
            <input type="text" id="proposalLocation" class="form-input" placeholder="Ej: 12 ubicaciones identificadas" />
          </div>
        </div>
        <div class="modal__footer">
          <button class="btn btn--outline" id="cancelProposal">Cancelar</button>
          <button class="btn btn--primary">Enviar Propuesta</button>
        </div>
      </div>
    </div>

    <!-- Header del Dashboard -->
    <header class="dashboard-header">
      <div class="container">
        <div class="dashboard-header__inner">
          <div class="dashboard-header__content">
            <h1 class="dashboard-header__title">Dashboard de Proyectos</h1>
            <p class="dashboard-header__subtitle">Explora y contribuye a proyectos comunitarios activos</p>
            
            <div class="dashboard-overview">
              <div class="dashboard-overview__card">
                <div class="dashboard-overview__content">
                  <div class="dashboard-overview__value">24</div>
                  <div class="dashboard-overview__label">Proyectos Activos</div>
                </div>
              </div>
              
              <div class="dashboard-overview__card">
                <div class="dashboard-overview__content">
                  <div class="dashboard-overview__value">€345,780</div>
                  <div class="dashboard-overview__label">Fondos Recaudados</div>
                </div>
              </div>
              
              <div class="dashboard-overview__card">
                <div class="dashboard-overview__content">
                  <div class="dashboard-overview__value">4,587</div>
                  <div class="dashboard-overview__label">Contribuyentes</div>
                </div>
              </div>
              
              <div class="dashboard-overview__card">
                <div class="dashboard-overview__content">
                  <div class="dashboard-overview__value">78</div>
                  <div class="dashboard-overview__label">Proyectos Completados</div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="dashboard-header__action">
            <!-- Botón Nueva Propuesta -->
            <button id="newProposalBtn" class="btn btn--primary btn--lg btn--pulse">
              <i class="fas fa-plus-circle"></i> Nueva Propuesta
            </button>
            <div class="dashboard-header__tooltip">
              <i class="fas fa-info-circle"></i> Haz clic para crear una nueva propuesta de proyecto comunitario
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Contenido Principal -->
    <main class="py-6">
      <div class="container">
        <!-- Filtros y Búsqueda -->
        <div class="dashboard-filters">
          <button class="dashboard-filters__tab dashboard-filters__tab--active" data-filter="all">
            <i class="fas fa-th-large"></i> Todos
          </button>
          <button class="dashboard-filters__tab" data-filter="voting">
            <i class="fas fa-vote-yea"></i> En Votación
          </button>
          <button class="dashboard-filters__tab" data-filter="progress">
            <i class="fas fa-tasks"></i> En Progreso
          </button>
          <button class="dashboard-filters__tab" data-filter="completed">
            <i class="fas fa-check-circle"></i> Completados
          </button>
          <button class="dashboard-filters__tab" data-filter="proposal">
            <i class="fas fa-lightbulb"></i> Propuestas
          </button>
        </div>

        <!-- Estadísticas y Actividad Reciente -->
        <section class="dashboard-section">
          <div class="dashboard-section__header">
            <h2 class="dashboard-section__title">Estadísticas y Actividad</h2>
            <p class="dashboard-section__subtitle">Resumen de la actividad de la plataforma</p>
          </div>
          
          <div class="dashboard-stats-grid">
            <div class="dashboard-stat-card" onclick="showDetailedStats('funds')">
              <div class="dashboard-stat-card__icon">
                <i class="fas fa-chart-line"></i>
              </div>
              <div class="dashboard-stat-card__content">
                <div class="dashboard-stat-card__value">€245,780</div>
                <div class="dashboard-stat-card__label">Fondos Totales</div>
                <div class="dashboard-stat-card__trend dashboard-stat-card__trend--up">
                  <i class="fas fa-arrow-up"></i> 12.5% este mes
                </div>
              </div>
              <div class="dashboard-stat-card__chart">
                <canvas class="mini-chart" id="fundsChart" width="120" height="40"></canvas>
              </div>
              <div class="dashboard-stat-card__tooltip">Haz clic para ver detalles</div>
            </div>
            
            <div class="dashboard-stat-card" onclick="showDetailedStats('projects')">
              <div class="dashboard-stat-card__icon">
                <i class="fas fa-project-diagram"></i>
              </div>
              <div class="dashboard-stat-card__content">
                <div class="dashboard-stat-card__value">24</div>
                <div class="dashboard-stat-card__label">Proyectos Activos</div>
                <div class="dashboard-stat-card__trend dashboard-stat-card__trend--up">
                  <i class="fas fa-arrow-up"></i> 3 nuevos
                </div>
              </div>
              <div class="dashboard-stat-card__chart">
                <canvas class="mini-chart" id="projectsChart" width="120" height="40"></canvas>
              </div>
              <div class="dashboard-stat-card__tooltip">Haz clic para ver detalles</div>
            </div>
            
            <div class="dashboard-stat-card" onclick="showDetailedStats('contributors')">
              <div class="dashboard-stat-card__icon">
                <i class="fas fa-users"></i>
              </div>
              <div class="dashboard-stat-card__content">
                <div class="dashboard-stat-card__value">1,245</div>
                <div class="dashboard-stat-card__label">Contribuyentes</div>
                <div class="dashboard-stat-card__trend dashboard-stat-card__trend--up">
                  <i class="fas fa-arrow-up"></i> 85 este mes
                </div>
              </div>
              <div class="dashboard-stat-card__chart">
                <canvas class="mini-chart" id="contributorsChart" width="120" height="40"></canvas>
              </div>
              <div class="dashboard-stat-card__tooltip">Haz clic para ver detalles</div>
            </div>
            
            <div class="dashboard-stat-card" onclick="showDetailedStats('completed')">
              <div class="dashboard-stat-card__icon">
                <i class="fas fa-check-circle"></i>
              </div>
              <div class="dashboard-stat-card__content">
                <div class="dashboard-stat-card__value">18</div>
                <div class="dashboard-stat-card__label">Proyectos Completados</div>
                <div class="dashboard-stat-card__trend dashboard-stat-card__trend--up">
                  <i class="fas fa-arrow-up"></i> 2 este mes
                </div>
              </div>
              <div class="dashboard-stat-card__chart">
                <canvas class="mini-chart" id="completedChart" width="120" height="40"></canvas>
              </div>
              <div class="dashboard-stat-card__tooltip">Haz clic para ver detalles</div>
            </div>
          </div>
          
          <div class="dashboard-activity">
            <div class="dashboard-activity__header">
              <h3 class="dashboard-activity__title">Actividad Reciente</h3>
              <button class="btn btn--sm btn--outline" id="viewAllActivityBtn">
                <i class="fas fa-list"></i> Ver Todo
              </button>
            </div>
            
            <div class="dashboard-activity__list">
              <div class="dashboard-activity__item" onclick="viewProjectDetails('huertos')">
                <div class="dashboard-activity__icon">
                  <i class="fas fa-vote-yea"></i>
                </div>
                <div class="dashboard-activity__content">
                  <div class="dashboard-activity__text">
                    <strong>María García</strong> votó a favor de <a href="javascript:void(0)">Red de Huertos Urbanos</a>
                  </div>
                  <div class="dashboard-activity__time">Hace 5 minutos</div>
                </div>
              </div>
              
              <div class="dashboard-activity__item" onclick="viewProjectDetails('energia')">
                <div class="dashboard-activity__icon">
                  <i class="fas fa-hand-holding-usd"></i>
                </div>
                <div class="dashboard-activity__content">
                  <div class="dashboard-activity__text">
                    <strong>Juan Pérez</strong> contribuyó con <strong>€50</strong> a <a href="javascript:void(0)">Centro de Formación en Energías Renovables</a>
                  </div>
                  <div class="dashboard-activity__time">Hace 15 minutos</div>
                </div>
              </div>
              
              <div class="dashboard-activity__item" onclick="viewProjectDetails('taller')">
                <div class="dashboard-activity__icon">
                  <i class="fas fa-lightbulb"></i>
                </div>
                <div class="dashboard-activity__content">
                  <div class="dashboard-activity__text">
                    <strong>Ana Martínez</strong> propuso un nuevo proyecto: <a href="javascript:void(0)">Taller de Reparación Comunitario</a>
                  </div>
                  <div class="dashboard-activity__time">Hace 45 minutos</div>
                </div>
              </div>
              
              <div class="dashboard-activity__item" onclick="viewProjectDetails('reciclaje')">
                <div class="dashboard-activity__icon">
                  <i class="fas fa-comment-alt"></i>
                </div>
                <div class="dashboard-activity__content">
                  <div class="dashboard-activity__text">
                    <strong>Carlos Rodríguez</strong> comentó en <a href="javascript:void(0)">Programa de Reciclaje Comunitario</a>
                  </div>
                  <div class="dashboard-activity__time">Hace 1 hora</div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Proyectos Destacados -->
        <section class="dashboard-section">
          <div class="dashboard-section__header">
            <h2 class="dashboard-section__title">Proyectos Destacados</h2>
            <p class="dashboard-section__subtitle">Los proyectos más populares que necesitan tu apoyo</p>
            <div class="dashboard-section__controls">
              <button class="btn btn--icon btn--sm btn--outline featured-projects__prev">
                <i class="fas fa-chevron-left"></i>
              </button>
              <div class="featured-projects__indicators">
                <span class="featured-projects__indicator active" data-slide="0"></span>
                <span class="featured-projects__indicator" data-slide="1"></span>
                <span class="featured-projects__indicator" data-slide="2"></span>
              </div>
              <button class="btn btn--icon btn--sm btn--outline featured-projects__next">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>
          
          <div class="featured-projects">
            <div class="featured-projects__slider">
              <!-- Proyecto 1 -->
              <div class="featured-project active" data-id="huertos">
                <div class="featured-project__image" style="background-image: url('../assets/images/projects/huertos.jpg')">
                  <div class="featured-project__badge">En Votación</div>
                  <div class="featured-project__overlay">
                    <div class="featured-project__overlay-content">
                      <span class="featured-project__overlay-label">Proyecto Destacado</span>
                      <span class="featured-project__overlay-icon"><i class="fas fa-star"></i></span>
                    </div>
                  </div>
                </div>
                <div class="featured-project__content">
                  <h3 class="featured-project__title">Red de Huertos Urbanos Comunitarios</h3>
                  <p class="featured-project__description">Crear una red de 12 huertos comunitarios en azoteas y solares vacíos, proporcionando alimentos frescos, educación ambiental y espacios de encuentro vecinal.</p>
                  
                  <div class="featured-project__progress">
                    <div class="featured-project__progress-info">
                      <span>€40,050 recaudados de €45,000</span>
                      <span class="featured-project__progress-percentage">89%</span>
                    </div>
                    <div class="featured-project__progress-bar">
                      <div class="featured-project__progress-value" style="width: 89%"></div>
                    </div>
                  </div>
                  
                  <div class="featured-project__meta">
                    <div class="featured-project__meta-item">
                      <i class="fas fa-users"></i>
                      <span>1,247 contribuyentes</span>
                    </div>
                    <div class="featured-project__meta-item">
                      <i class="fas fa-calendar-alt"></i>
                      <span>Finaliza en 5 días</span>
                    </div>
                    <div class="featured-project__meta-item">
                      <i class="fas fa-map-marker-alt"></i>
                      <span>Distrito Centro</span>
                    </div>
                  </div>
                  
                  <div class="featured-project__actions">
                    <button class="btn btn--primary btn--pulse" onclick="openContribution('Red de Huertos Urbanos Comunitarios')">
                      <i class="fas fa-heart"></i> Contribuir Ahora
                    </button>
                    <button class="btn btn--outline" onclick="viewProjectDetails('huertos')">
                      <i class="fas fa-info-circle"></i> Ver Detalles
                    </button>
                    <button class="btn btn--icon btn--outline" onclick="shareProject('huertos')">
                      <i class="fas fa-share-alt"></i>
                    </button>
                  </div>
                  <div class="featured-project__tooltip">
                    <i class="fas fa-info-circle"></i> Este proyecto ha recibido el apoyo de más de 1,200 vecinos. ¡Únete y contribuye antes de que finalice!
                  </div>
                </div>
              </div>
              
              <!-- Proyecto 2 -->
              <div class="featured-project" data-id="energia">
                <div class="featured-project__image" style="background-image: url('../assets/images/projects/energia.jpg')">
                  <div class="featured-project__badge">En Votación</div>
                  <div class="featured-project__overlay">
                    <div class="featured-project__overlay-content">
                      <span class="featured-project__overlay-label">Proyecto Destacado</span>
                      <span class="featured-project__overlay-icon"><i class="fas fa-star"></i></span>
                    </div>
                  </div>
                </div>
                <div class="featured-project__content">
                  <h3 class="featured-project__title">Centro de Formación en Energías Renovables</h3>
                  <p class="featured-project__description">Establecer un centro de formación técnica en instalación de placas solares, eólica doméstica y eficiencia energética. Incluye talleres gratuitos para vecinos.</p>
                  
                  <div class="featured-project__progress">
                    <div class="featured-project__progress-info">
                      <span>€26,790 recaudados de €28,500</span>
                      <span class="featured-project__progress-percentage">94%</span>
                    </div>
                    <div class="featured-project__progress-bar">
                      <div class="featured-project__progress-value" style="width: 94%"></div>
                    </div>
                  </div>
                  
                  <div class="featured-project__meta">
                    <div class="featured-project__meta-item">
                      <i class="fas fa-users"></i>
                      <span>756 contribuyentes</span>
                    </div>
                    <div class="featured-project__meta-item">
                      <i class="fas fa-calendar-alt"></i>
                      <span>Finaliza en 12 días</span>
                    </div>
                    <div class="featured-project__meta-item">
                      <i class="fas fa-map-marker-alt"></i>
                      <span>Distrito Norte</span>
                    </div>
                  </div>
                  
                  <div class="featured-project__actions">
                    <button class="btn btn--primary" onclick="openContribution('Centro de Formación en Energías Renovables')">
                      <i class="fas fa-heart"></i> Contribuir Ahora
                    </button>
                    <button class="btn btn--outline" onclick="viewProjectDetails('energia')">
                      <i class="fas fa-info-circle"></i> Ver Detalles
                    </button>
                    <button class="btn btn--icon btn--outline" onclick="shareProject('energia')">
                      <i class="fas fa-share-alt"></i>
                    </button>
                  </div>
                  <div class="featured-project__tooltip">
                    <i class="fas fa-info-circle"></i> ¡Este proyecto está a punto de alcanzar su objetivo! Contribuye ahora y forma parte de esta iniciativa.
                  </div>
                </div>
              </div>
              
              <!-- Proyecto 3 -->
              <div class="featured-project" data-id="reciclaje">
                <div class="featured-project__image" style="background-image: url('../assets/images/projects/reciclaje.jpg')">
                  <div class="featured-project__badge">En Progreso</div>
                  <div class="featured-project__overlay">
                    <div class="featured-project__overlay-content">
                      <span class="featured-project__overlay-label">Proyecto Destacado</span>
                      <span class="featured-project__overlay-icon"><i class="fas fa-star"></i></span>
                    </div>
                  </div>
                </div>
                <div class="featured-project__content">
                  <h3 class="featured-project__title">Programa de Reciclaje Comunitario</h3>
                  <p class="featured-project__description">Implementar un sistema de reciclaje comunitario con puntos de recogida selectiva, talleres de reutilización y compostaje, y campañas de concienciación.</p>
                  
                  <div class="featured-project__progress">
                    <div class="featured-project__progress-info">
                      <span>€18,225 recaudados de €40,000</span>
                      <span class="featured-project__progress-percentage">45%</span>
                    </div>
                    <div class="featured-project__progress-bar">
                      <div class="featured-project__progress-value" style="width: 45%"></div>
                    </div>
                  </div>
                  
                  <div class="featured-project__meta">
                    <div class="featured-project__meta-item">
                      <i class="fas fa-users"></i>
                      <span>423 contribuyentes</span>
                    </div>
                    <div class="featured-project__meta-item">
                      <i class="fas fa-calendar-alt"></i>
                      <span>Finaliza en 30 días</span>
                    </div>
                    <div class="featured-project__meta-item">
                      <i class="fas fa-map-marker-alt"></i>
                      <span>Distrito Sur</span>
                    </div>
                  </div>
                  
                  <div class="featured-project__actions">
                    <button class="btn btn--primary" onclick="openContribution('Programa de Reciclaje Comunitario')">
                      <i class="fas fa-heart"></i> Contribuir Ahora
                    </button>
                    <button class="btn btn--outline" onclick="viewProjectDetails('reciclaje')">
                      <i class="fas fa-info-circle"></i> Ver Detalles
                    </button>
                    <button class="btn btn--icon btn--outline" onclick="shareProject('reciclaje')">
                      <i class="fas fa-share-alt"></i>
                    </button>
                  </div>
                  <div class="featured-project__tooltip">
                    <i class="fas fa-info-circle"></i> Este proyecto necesita más apoyo para alcanzar su objetivo. ¡Tu contribución es fundamental!
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Todos los Proyectos -->
        <section class="dashboard-section">
          <div class="dashboard-section__header">
            <h2 class="dashboard-section__title">Todos los Proyectos</h2>
            <p class="dashboard-section__subtitle">Explora todos los proyectos disponibles en la plataforma</p>
          </div>
          
          <div class="project-grid" id="projectGrid">
            <!-- Las tarjetas de proyecto se generarán dinámicamente -->
          </div>
        </section>
        
        <!-- Ver más proyectos -->
        <div class="text-center mt-5">
          <!-- Botón Ver Todos los Proyectos -->
          <button class="btn btn--outline" id="viewAllProjectsBtn" onclick="showAllProjects()">Ver Todos los Proyectos</button>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer__inner">
          <div class="footer__brand">
            <div class="footer__logo">
              <img src="../assets/images/logo.svg" alt="CivicVault Logo" class="footer__logo-img">
              <div class="footer__logo-text">CivicVault</div>
            </div>
            <p class="footer__tagline">
              Transformando comunidades a través de la financiación transparente y participativa.
            </p>
            <div class="footer__social">
              <a href="#" class="footer__social-link"><i class="fab fa-twitter"></i></a>
              <a href="#" class="footer__social-link"><i class="fab fa-facebook"></i></a>
              <a href="#" class="footer__social-link"><i class="fab fa-instagram"></i></a>
              <a href="#" class="footer__social-link"><i class="fab fa-github"></i></a>
            </div>
          </div>
          
          <div class="footer__column">
            <h3 class="footer__column-title">Plataforma</h3>
            <ul class="footer__links">
              <li><a href="../index.html">Inicio</a></li>
              <li><a href="#">Dashboard</a></li>
              <li><a href="../proposals/proposals.html">Propuestas</a></li>
              <li><a href="../wallet/wallet.html">Wallet</a></li>
            </ul>
          </div>
          
          <div class="footer__column">
            <h3 class="footer__column-title">Recursos</h3>
            <ul class="footer__links">
              <li><a href="#">Documentación</a></li>
              <li><a href="#">Guías</a></li>
              <li><a href="#">API</a></li>
              <li><a href="#">Comunidad</a></li>
            </ul>
          </div>
          
          <div class="footer__column">
            <h3 class="footer__column-title">Legal</h3>
            <ul class="footer__links">
              <li><a href="#">Términos de Servicio</a></li>
              <li><a href="#">Política de Privacidad</a></li>
              <li><a href="#">Cookies</a></li>
              <li><a href="#">Licencias</a></li>
            </ul>
          </div>
        </div>
        
        <div class="footer__bottom">
          <div class="footer__copy">
            &copy; 2025 CivicVault. Todos los derechos reservados.
          </div>
          <div class="footer__legal">
            <a href="#">Términos</a>
            <a href="#">Privacidad</a>
            <a href="#">Cookies</a>
          </div>
        </div>
      </div>
    </footer>

    <!-- JavaScript Components -->
    <script src="../js/components/navbar.js"></script>
    <script src="../js/components/footer.js"></script>
    <script src="../js/components/modal.js"></script>
    <script src="../js/components/notifications.js"></script>
    <script src="../js/components/search.js"></script>
    <script src="../js/components/chart-utils.js"></script>
    <script src="../js/components/comments.js"></script>
    <script src="../js/components/featured-projects.js"></script>
    
    <!-- Main JavaScript -->
    <script src="../js/main.js"></script>
    <script src="../js/dashboard.js"></script>
    <script src="../js/dashboard-enhanced.js"></script>
    
    <!-- Botón de filtros -->
    <script src="../js/filter-button.js"></script>
    
    <!-- Font Awesome para iconos -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    
    <!-- Script para el botón de filtros -->
    <script>
        // Función para inicializar el botón de filtros
        function initFilterButton() {
            console.log('Inicializando botón de filtros (inline)...');
            
            // Obtener referencias a los elementos
            var filterButton = document.getElementById('dashboardAdvancedFiltersBtn');
            var filterPanel = document.getElementById('dashboardAdvancedFiltersPanel');
            var closeButton = document.getElementById('dashboardAdvancedFiltersClose');
            
            console.log('Botón de filtros:', filterButton);
            console.log('Panel de filtros:', filterPanel);
            console.log('Botón de cerrar:', closeButton);
            
            // Verificar si los elementos existen
            if (!filterButton) {
                console.error('Error: No se encontró el botón de filtros (advancedFiltersBtn)');
                return;
            }
            
            if (!filterPanel) {
                console.error('Error: No se encontró el panel de filtros (advancedFiltersPanel)');
                return;
            }
            
            // Asegurarse de que el panel esté oculto inicialmente
            filterPanel.style.display = 'none';
            
            // Función para mostrar/ocultar el panel
            function togglePanel(event) {
                // Evitar que el evento se propague
                if (event) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                
                console.log('Alternando panel de filtros');
                
                if (filterPanel.style.display === 'none' || filterPanel.style.display === '') {
                    // Mostrar el panel
                    filterPanel.style.display = 'block';
                    filterButton.classList.add('active');
                    console.log('Panel mostrado');
                    
                    // Añadir un pequeño retraso para evitar que el evento de clic se propague
                    setTimeout(function() {
                        // Añadir evento para cerrar al hacer clic fuera
                        document.addEventListener('click', outsideClickHandler);
                    }, 10);
                } else {
                    // Ocultar el panel
                    filterPanel.style.display = 'none';
                    filterButton.classList.remove('active');
                    console.log('Panel ocultado');
                    
                    // Eliminar el evento de clic fuera
                    document.removeEventListener('click', outsideClickHandler);
                }
            }
            
            // Función para cerrar el panel
            function closePanel(event) {
                // Evitar que el evento se propague
                if (event) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                
                console.log('Cerrando panel de filtros');
                filterPanel.style.display = 'none';
                filterButton.classList.remove('active');
                
                // Eliminar el evento de clic fuera
                document.removeEventListener('click', outsideClickHandler);
            }
            
            // Función para manejar clics fuera del panel
            function outsideClickHandler(event) {
                if (!filterPanel.contains(event.target) && event.target !== filterButton) {
                    closePanel();
                }
            }
            
            // Asignar eventos directamente
            filterButton.onclick = togglePanel;
            
            if (closeButton) {
                closeButton.onclick = closePanel;
            }
            
            // Configurar el slider de presupuesto
            var budgetSlider = document.getElementById('budgetSlider');
            var budgetValue = document.querySelector('.range-slider__value');
            
            if (budgetSlider && budgetValue) {
                budgetSlider.addEventListener('input', function() {
                    budgetValue.textContent = 'Hasta €' + parseInt(this.value).toLocaleString();
                });
            }
            
            console.log('Inicialización del botón de filtros completada (inline)');
        }
        
        // Inicializar cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', initFilterButton);
    </script>
    
    <!-- Script para inicializar los gráficos y funcionalidades -->
    <script>
      // Inicializar gráficos cuando se carga la página
      document.addEventListener('DOMContentLoaded', function() {
        // Verificar si ChartUtils está disponible
        if (typeof ChartUtils !== 'undefined') {
          // Datos para los gráficos
          const chartData = {
            funds: [12500, 18700, 22400, 28900, 32600, 38200, 45000, 52300, 58700, 65200, 72800, 78500],
            projects: [5, 8, 10, 12, 15, 18, 20, 22, 24, 26, 28, 30],
            contributors: [120, 180, 250, 320, 410, 480, 560, 650, 780, 920, 1050, 1245],
            completed: [2, 4, 5, 7, 8, 10, 12, 13, 15, 16, 17, 18]
          };
          
          // Crear gráficos
          ChartUtils.createMiniLineChart('fundsChart', chartData.funds, '#3b82f6', {
            fillArea: true,
            showDots: true,
            lineWidth: 2,
            fillOpacity: 0.2
          });
          
          ChartUtils.createMiniBarChart('projectsChart', chartData.projects, '#10b981', {
            barSpacing: 2,
            barOpacity: 0.8
          });
          
          ChartUtils.createMiniLineChart('contributorsChart', chartData.contributors, '#f59e0b', {
            fillArea: true,
            showDots: false,
            lineWidth: 2,
            fillOpacity: 0.2
          });
          
          ChartUtils.createMiniLineChart('completedChart', chartData.completed, '#8b5cf6', {
            fillArea: false,
            showDots: true,
            lineWidth: 2
          });
        }
        
        // Configurar funcionalidad para las tarjetas de estadísticas
        const statCards = document.querySelectorAll('.dashboard-stat-card');
        statCards.forEach(card => {
          card.addEventListener('click', function() {
            const statType = this.getAttribute('onclick').match(/showDetailedStats\('(.+?)'\)/)[1];
            showDetailedStats(statType);
          });
        });
        
        // Configurar botón de "Ver Todo" en actividad reciente
        const viewAllActivityBtn = document.getElementById('viewAllActivityBtn');
        if (viewAllActivityBtn) {
          viewAllActivityBtn.addEventListener('click', function() {
            // Mostrar más actividades
            const activities = [
              {
                icon: '<i class="fas fa-comment-alt"></i>',
                text: '<strong>Miguel Sánchez</strong> comentó en <a href="javascript:void(0)">Programa de Reciclaje Comunitario</a>',
                time: 'Hace 2 horas'
              },
              {
                icon: '<i class="fas fa-vote-yea"></i>',
                text: '<strong>Laura Gómez</strong> votó a favor de <a href="javascript:void(0)">Taller de Reparación Comunitario</a>',
                time: 'Hace 3 horas'
              },
              {
                icon: '<i class="fas fa-hand-holding-usd"></i>',
                text: '<strong>David Fernández</strong> contribuyó con <strong>€75</strong> a <a href="javascript:void(0)">Centro de Formación en Energías Renovables</a>',
                time: 'Hace 4 horas'
              }
            ];
            
            // Agregar nuevas actividades al listado
            const activityList = document.querySelector('.dashboard-activity__list');
            if (activityList) {
              activities.forEach(activity => {
                const activityItem = document.createElement('div');
                activityItem.className = 'dashboard-activity__item';
                activityItem.innerHTML = `
                  <div class="dashboard-activity__icon">
                    ${activity.icon}
                  </div>
                  <div class="dashboard-activity__content">
                    <div class="dashboard-activity__text">
                      ${activity.text}
                    </div>
                    <div class="dashboard-activity__time">${activity.time}</div>
                  </div>
                `;
                activityList.appendChild(activityItem);
              });
              
              // Cambiar el texto del botón
              viewAllActivityBtn.innerHTML = '<i class="fas fa-check"></i> Actividad Cargada';
              viewAllActivityBtn.disabled = true;
              viewAllActivityBtn.classList.add('btn--success');
              
              // Mostrar notificación
              showNotification('Se han cargado más actividades recientes.', 'success');
            }
          });
        }
      });
      
      // Función para mostrar estadísticas detalladas
      function showDetailedStats(statType) {
        if (typeof window.showDetailedStats === 'function') {
          window.showDetailedStats(statType);
        } else {
          console.log('Mostrando estadísticas detalladas para:', statType);
          
          // Implementación básica si la función no está disponible
          const modal = new Modal('projectDetailsModal');
          modal.setContent(`
            <div>
              <h2 class="text-xl font-bold mb-4">Detalles de Estadísticas: ${statType}</h2>
              <p class="mb-4">Se mostrarán estadísticas detalladas para: ${statType}</p>
              <div class="text-center">
                <button class="btn btn--primary" onclick="modal.close()">Cerrar</button>
              </div>
            </div>
          `);
          modal.open();
        }
      }
    </script>
  </body>
</html>